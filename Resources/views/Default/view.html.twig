{% extends 'LemonReportBundle::layout.html.twig' %}

{% block title report.name %}

{% block body %}

    <h2>{{report.name}}</h2>

    {% if report.parameters is not empty %}
    <form method="post" {{ form_enctype(form) }}>
        {{form_widget(form)}}
    </form>
    {% endif %}

    <div class="row">
        <div class="span8">
            <h3>Results</h3>
        </div>
        <div class="span4 text-right">
            <div class="btn-toolbar">
                <div class="btn-group">
                    <a class="btn btn-small" href="{{path('report_view', { id: report.id, _format: 'csv' })}}"><i class="icon-download-alt"></i> CSV</a>
                    <a class="btn btn-small" href="{{path('report_view', { id: report.id, _format: 'json' })}}">JSON</a>
                    <a class="btn btn-small" href="{{path('report_view', { id: report.id, _format: 'xml' })}}">XML</a>
                </div>
            </div>
        </div>
    </div>

    <table class="table table-hover table-bordered table-condensed">
        <thead>
            <tr>
            {% for k, col in columns %}
                <th>{{col}}</th>
            {% endfor %}
            </tr>
        </thead>
        <tbody>
        {% for result in results %}
            <tr>
            {% for key, value in result %}
                <td>{{value}}</td>
            {% endfor %}
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <h4>Query</h4>
    {{query|raw}}

{% endblock %}